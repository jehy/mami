<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Лабораторная #1 по базам данных</title>
    <link href="http://fonts.googleapis.com/css?family=Raleway:700,300" rel="stylesheet"
          type="text/css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/prettify.css">
</head>
<body>
<div class="wrapper">
    <nav>

        <div class="pull-left">
            <h1><a href="/"><img src="img/icon.png" alt="Free Documentation Template Icon" /> <span>Все материалы</span></a></h1>
        </div>

        <div class="pull-right">

        </div>

    </nav>
    <header>
        <div class="container">
            <h2 class="lone-header">Лабораторная #1 по базам данных</h2>
        </div>
    </header>
    <section>
        <div class="container">
            <ul class="docs-nav">
                <li><a href="#install" class="cc-active">Установка MySQL</a></li>
                <li><a href="#launch" class="cc-active">Запуск MySQL</a></li>
                <li><a href="#privs" class="cc-active">Привилегии в MySQL</a></li>
                <li><a href="#create" class="cc-active">Создание пользователя в MySQL</a></li>
                <li><a href="#set_privs" class="cc-active">Назначение привилегий</a></li>
                <li><a href="#utils" class="cc-active">Утилиты</a></li>
                <li><a href="#task" class="cc-active">Задание</a></li>
                <li><a href="#questions" class="cc-active">Вопросы</a></li>
                <li class="separator"></li>
            </ul>
            <div class="docs-content">
                <h2>Лабораторная работа №1. Интерфейс СУБД MySQL. Предоставление доступа и привилегий. Утилиты, входящие
                    в состав СУБД</h2>

                <b>Цель работы:</b> Ознакомиться с приложениями, включенными в состав СУБД MySQL. Получить навыки
                управления учетными записями пользователей и определения привилегий. Ознакомиться с утилитами, входящими
                в состав СУБД MySQL, получить навыки работы с ними.


                <h3 id="install">Установка MySQL</h3>
                <p>
                    Есть несколько вариантов установки, в зависимости от того, будете ли вы использовать СУБД на своём
                    личном компьютере (что рекомендуется для полноценного освоения), или будете использовать компьютеры
                    института. </p>
                <h4>Установка на личном компьютере</h4>
                <p>Вы можете воспользоваться тем же вариантом, что и для установки на компьютер института, но проще
                    будет использовать специальный инсталлятор.
                    Для установки на личном компьютере вы просто скачиваете с сайта <a
                            href="http://dev.mysql.com/downloads/mysql/">http://dev.mysql.com/downloads/mysql/</a> MySQL
                    installer - это стандартный установщик, при помощи которого вы установите MySQL так же, как любую
                    другую прогрумму Windows. В процессе установке следует выбрать вариант "Developer Default", чтобы
                    установить полный необходимый вам набор инстурментов. Все остальные параметры можно оставить по
                    умолчанию. Пароль для администратора вы можете придумать сами.
                </p>
                <h4>Установка на компьютере инстутута</h4>
                <p>Скачать актуальный дистрибутив СУБД MySQL можно по адресу<br>

                    <a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a>
                    <br>
                    Нам понадобится вариант Windows (x86, 64-bit), ZIP Archive. Скорее всего, вы так же можете получить
                    его из сетевого диска, куда его предварительно скопировал преподаватель. В данном случае вы просто
                    распаковываете скачанный архив к себе на локальный (не сетевой!) диск.
                </p>
                <h3 id="launch">Запуск MySQL</h3>
                <h4>Запуск на личном компьютере</h4>
                <p>
                    В случае, если вы установили MySQL при помощи инсталлятора, то его запуск и остановка будут
                    осуществляться через управление службами Windows. По умолчанию после установки сервис должен уже
                    работать.
                    <img src="img/dbms-lab1/mysql-service.png">
                </p>
                <h4>Запуск на компьютере института</h4>
                <p>
                    Управление сервером будет осуществляться из командной строки. Для этого необходимо выполнить
                    следующие команды (перейдя в папку MySQL):
                </p>
                <ol>
                    <li>Сначала инициализируем базу:<br>

                        <pre class="prettyprint">bin\mysqld.exe --initialize --skip-log-syslog --standalone --console</pre>
                    </li>
                    <li>
                        Запомните пароль, который будет сгенерирован для пользователя root
                    </li>
                    <li>
                        Теперь запускаем базу:
                        <pre class="prettyprint">bin\mysqld.exe --skip-log-syslog --standalone --console</pre>
                    </li>
                    <li>И меняем пароль. Для этого запускаем клиентскую программу mysql

                        <pre class="prettyprint">Bin\mysql.exe –u root –p</pre>
                        и вводим текущий пароль.
                    </li>
                    <li>
                        И, оказавшись в консоли MySQL, меняем пароль:
                        <pre class="prettyprint lang-sql">SET PASSWORD FOR 'root'@'localhost' = PASSWORD('123');</pre>
                        Не забудьте переподключиться и проверить, что пароль поменялся!
                    </li>
                </ol>
                <h3 id="privs">Привилегии в MySQL</h3>
                <p>Для <b>работы с базами данных в MySQL</b> необходим пользователь, наделённый такими правами. То есть
                    при подключении к базе данных Вы должны указывать логин пользователя и его пароль, и если доступ ему
                    открыт, то он получит определённые права.</p>

                <p>В <b>MySQL</b> существуют три группы привилегий: <b>данные</b>, <b>структура</b>,
                    <b>администрирование</b>.
                    Первая группа связана с изменением записей в таблицах, вторая группа связана с изменением структуры
                    баз данных, а третья связана с администрированием, как бы это очевидно не звучало.</p>
                <p>Теперь перейдём к рассмотрению каждой группы отдельно. И начнём с прав на управление данными в
                    таблицах.</p>
                <ul>
                    <li><b>SELECT</b> - эта привилегия позволяет делать выборку (вытаскивание) записей из таблиц баз
                        данных.
                    </li>
                    <li><b>INSERT</b> - привилегия, которая необходима для добавления новых записей в таблицу.</li>
                    <li><b>UPDATE</b> - право, позволяющее обновлять записи в таблице.</li>
                    <li><b>DELETE</b> - эта привилегия позволяет удалять записи из таблицы.</li>
                    <li><b>FILE</b> - разрешает делать выборку записей и записывать данные в файл, а также считывать их
                        оттуда.
                    </li>
                </ul>
                <p>Теперь перейдём к <b>привилегиям пользователей MySQL</b>, позволяющие изменять структуру таблицы и
                    базы данных.</p>
                <ul>
                    <li><b>CREATE</b> - привилегия, позволяющая создавать новые базы данных, а также новые таблицы в
                        базе данных.
                    </li>
                    <li><b>ALTER</b> - привилегия, позволяющая переименовывать таблицы, вставлять новые поля в таблицу,
                        удалять поля из таблицы, а также модифицировать их.
                    </li>
                    <li><b>INDEX</b> - разрешает создавать индекс по определённому полю и удалять его. О том, что это
                        такое и для чего нужно мы поговорим в одной из следующих статей.
                    </li>
                    <li><b>DROP</b> - право, которое позволяет удалять либо таблицы, либо целые базы данных.</li>
                    <li><b>CREATE TEMPORARY TABLES</b> - возможность создавать временные таблицы, которые хранятся во
                        время сессии, а после окончания сессии данная таблица автоматически удаляется.
                    </li>
                </ul>
                <p>И последняя группа привилегий - это привилегии, связанные с администрированием баз данных.</p>
                <ul>
                    <li><b>GRANT</b> - привилегия, которая позволяет создавать новых пользователей, а также менять права
                        у существующих. Тут есть очень важная деталь: нельзя изменять значения привилегий, которыми сам
                        не обладаешь. То есть если человек обладает <b>привилегией GRANT</b>, но не обладает <b>привилегией
                            SELECT</b>, то он не может новым пользователям дать <b>привилегию SELECT</b>. Впрочем, это
                        вполне логично.
                    </li>
                    <li><b>SUPER</b> - позволяет использовать команду "<b>kill</b>", то есть убить поток. Поток - это
                        текущее подключение другого пользователя к базе данных.
                    </li>
                    <li><b>PROCESS</b> - привилегия, позволяющая выполнить команду "<b>processlist</b>", которая
                        показывает список потоков.
                    </li>
                    <li><b>RELOAD</b> - позволяет открывать и закрывать файлы журналов, а также перечитывать таблицы
                        привилегий пользователей.
                    </li>
                    <li><b>SHUTDOWN</b> - привилегия, позволяющая выполнить команду "<b>shutdown</b>", отключающая
                        работу сервера.
                    </li>
                    <li><b>SHOW DATABASES</b> - разрешает просматривать все существующие базы данных.</li>
                    <li><b>REFERENCES</b> - данная привилегия ещё не доступна, а только зарезервирована для
                        использования в будущем.
                    </li>
                    <li><b>LOCK TABLES</b> - позволяет блокировать таблицы от указанных потоков.</li>
                    <li><b>EXECUTE</b> - позволяет запускать хранимые процедуры.</li>
                    <li><b>REPLICATION CLIENT</b> - даёт право получать местонахождение ведущего (<b>master</b>) и
                        ведомых (<b>slaves</b>) серверов.
                    </li>
                    <li><b>REPLICATION SLAVE</b> - это привилегия, позволяющая читать ведомым журнала ведущего сервера.
                    </li>
                </ul>
                <p>И, наконец, специальные привилегии, связанные с ограничением на доступные ресурсы:</p>
                <ul>
                    <li><b>MAX QUERIES PER HOUR</b> - максимальное количество запросов в час, которое может отправить
                        пользователь.
                    </li>
                    <li><b>MAX UPDATES PER HOUR</b> - максимальное количество команд в час, которые каким-либо образом
                        изменяют либо таблицу, либо базу данных.
                    </li>
                    <li><b>MAX CONNECTIONS PER HOUR</b> - максимальное количество подключений в час, которое может
                        сделать пользователь.
                    </li>
                </ul>
                <p>Если значение вышеназванных пределов равны "<b>0</b>", то ресурсы для пользователя не ограничены.</p>

                <h3 id="create">Создание нового пользователя в MySQL</h3>
                <p>Ранее мы вносили все изменения в настройки MySQL под root-пользователем, имея полный доступ ко всем
                    базам данных. Однако для случаев, когда могут потребоваться более жесткие ограничения, есть способы
                    создания пользователей с особыми наборами прав доступа.
                </p>
                <p>
                    Давайте начнем с создания нового пользователя из консоли MySQL:
                </p>
                <pre class="prettyprint lang-sql">CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';</pre>

                <p>К сожалению, на данном этапе пользователь "newuser" не имеет прав делать что-либо с базами данных. На
                    самом деле, даже если если пользователь "newuser" попробует залогиниться (с паролем "password"), он
                    не попадет в консоль MySQL.
                </p>
                <p>
                    Таким образом, первое, что нам необходимо сделать, это предоставить пользователю доступ к
                    информации, которая ему потребуется.</p>

                <pre class="prettyprint lang-sql">GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost';</pre>
                <p>Звездочки в этой команде задают базу и таблицу, соответственно, к которым у пользователя будет
                    доступ.
                    Конкретно эта команда позволяет пользователю читать, редактировать, выполнять любые действия над
                    всеми
                    базами данных и таблицами.
                </p>
                <p>
                    Поле завершения настройки прав доступа новых пользователей, убедитесь, что вы обновили все права
                    доступа:</p>

                <pre class="prettyprint lang-sql">FLUSH PRIVILEGES;</pre>
                <p>Теперь ваши изменения вступят в силу.</p>

                <h3 id="set_privs">Назначение привилегий</h3>
                <p>Для назначения прав конкретному пользователю можно использовать следующую схему:</p>

                <pre class="prettyprint lang-sql">GRANT [тип прав] ON [название базы данных].[название таблицы] TO ‘[имя пользователя]’@'localhost’;</pre>
                <p>Если вы хотите дать доступ к любой базе данных или к любой таблице, поставьте звездочку (*) вместо
                    названия базы данных или таблицы.</p>

                <p>Каждый раз, когда вы изменяете права доступа, не забудьте использовать команду Flush Privileges.</p>

                <p>Лишения прав доступа практически идентично их назначению:</p>

                <pre class="prettyprint lang-sql">REVOKE [тип прав] ON [название базы данных].[название таблицы] FROM ‘[имя пользователя]’@‘localhost’;</pre>
                <p>По аналогии с использованием команды DROP для удаления базы данных, вы можете использовать эту
                    команду и
                    для
                    удаления пользователя.</p>

                <pre class="prettyprint lang-sql">DROP USER ‘demo’@‘localhost’;</pre>
                <p>Для тестирования учетной записи созданного пользователя, разлогиньтесь с помощью команды:</p>

                <pre class="prettyprint">quit</pre>
                <p>и залогиньтесь снова, введя в терминате следующую команду:</p>

                <pre class="prettyprint">mysql -u [имя пользователя]-p</pre>

                <h3 id="utils">Основные утилиты MySQL.</h3>
                <p>В состав дистрибутива MySQL входят следующие утилиты:</p>
                <ul>
                    <li>mysqld</li>
                    <li> mysql</li>
                    <li>mysqladmin</li>
                    <li> mysqlaccess</li>
                    <li> mysqlshow</li>
                    <li> mysqldump</li>
                    <li> isamchk</li>
                </ul>
                <p>Утилиты mysqld и mysql были подробно рассмотрены ранее, поэтому возвращаться к ним не будем.
                    Кратко рассмотрим остальные.</p>
                <h4>Mysqladmin</h4>
                <p>Утилита для администрирования сервера. Может использоваться администратором, а также некоторыми
                    пользователями, которым предоставлены определенные привилегии, например – Reload_priv,
                    Shutdown_priv, Process_priv и File_priv. Данная команда может использоваться для создания баз
                    данных, изменения пароля пользователя(администратор может изменить пароль любому пользователю, а
                    рядовой пользователь – только свой собственный), перезагрузки и остановки сервера, просмотра
                    списка процессов, запущенных на сервере. Mysqladmin поддерживает следующие команды:</p>
                <ul>
                    <li>Create [database_name] Создает базу данных</li>
                    <li>Drop [database_name] Удаляет базу данных и все таблицы в ней</li>
                    <li>Reload Перезагружает сервер</li>
                    <li>Shutdown Останавливает работу сервера MySQL</li>
                    <li>Processlist Выводит список процессов на сервере</li>
                    <li>Status Выводит сообщение о статусе сервера</li>
                </ul>
                <p>Пример использования mysqladmin для изменения пароля:</p>
                <pre class="prettyprint">mysqladmin -u your_name password your_pass</pre>
                Следует заметить, что в случае использования mysqladmin для установки пароля, не требуется
                использование функции password().Mysqladmin сам заботится о шифровании пароля.
                <h4>Mysqlaccess</h4>
                Используется для проверки привилегий пользователя для доступа к конкретной базе данных. Общий
                синтаксис:
                <pre class="prettyprint">mysqlaccess [host] [user] [db] опции</pre>
                Полезная утилита для проверки прав доступа пользователя, если он получает сообщение Access denied,
                при попытке соединиться с базой данных.
                Опции:
                <ul>
                    <li>-?, --help Справка</li>
                    <li>-u, --user=[username] Имя пользователя</li>
                    <li>-p, --password=[password] Пароль пользователя</li>
                    <li>-h, --host=[hostname] Имя хоста для проверки прав доступа</li>
                    <li>-d, --db=[dbname] Имя базы данных для проверки прав доступа</li>
                    <li> -U, --superuser=[susername] Имя суперпользователя(root)</li>
                    <li>-P, --spassword=[spassword] Пароль администратора</li>
                    <li>-b, --brief Выводит краткие сведения о таблице</li>
                </ul>

                <h4>Mysqlshow</h4>

                Используется, чтобы показать, с какими базами данных работает сервер, какие таблицы содержит каждая
                БД и какие колонки есть в каждой таблице.Синтаксис:
                <pre class="prettyprint">mysqlshow [опции] [database [table [field]]]</pre>
                Mysqlshow может использовать следующие параметры:
                <ul>
                    <li>-?, --help Справка</li>
                    <li>-h, --host=[hostname] Имя сервера</li>
                    <li>-k, --key Показать ключи для таблицы</li>
                    <li>-p, --password=[password] Пароль пользователя</li>
                    <li>-u, --user=[username] Имя пользователя</li>
                    <li>-p, --port=[port] Порт для связи</li>
                    <li>-V, --version Вывести информацию о версии</li>
                </ul>
                Если ввести mysqlshow без аргументов, будут показаны все базы данных, если указать имя БД, будут
                показаны все таблицы в ней.
                Команды
                <pre class="prettyprint">mysqlshow</pre>
                <pre class="prettyprint">mysqlshow mysql</pre>

                <h4>Mysqldump</h4>

                Программа mysqldump используется для создания дампа содержания базы данных MySQL. Она пишет
                инструкции SQL в стандартный вывод. Эти инструкции SQL могут быть переназначены в файл. Можно
                резервировать базу данных MySQL, используя mysqldump, но при этом Вы должны убедиться, что в этот
                момент с базой данных не выполняется никаких других действий.
                Программа mysqldump поддерживает следующие параметры (Вы можете использовать короткую или подробную
                версию):
                <ul>
                    <li>-#, --debug=[options] Вывести в протокол отладочную информацию. В общем виде 'd:t:o,
                        filename`.
                    </li>
                    <li>-?, --help Справка.</li>
                    <li>-c, --compleat-insert Генерируйте полные инструкции insert (не исключая значений, которые
                        соответствуют значениям столбца по умолчанию).
                    </li>
                    <li>-h, --host=[hostname] Соединиться с сервером hostname.</li>
                    <li>-d, --no-data Экспорт только схемы информации (исключая данные).</li>
                    <li>-t, --no-create-info Экспорт только данных, исключая информацию для создания таблицы.
                        Противоположность -d.
                    </li>
                    <li>-p, --password=[password] Пароль пользователя, для соединения с сервером MySQL. Обратите
                        внимание,
                        что не должно быть пробела между -p и паролем.
                    </li>
                    <li>-q, --quick Не буферизовать результаты запроса, дамп выдать непосредственно к STDOUT.</li>
                    <li>-u, --user=[username] Имя пользователя. Если не задано, используется текущий логин.</li>
                    <li>-v, --verbose Вывести подробную информацию относительно различных стадий выполнения mysqldump.
                    </li>
                    <li>-P, --port=[port] Порт для связи.</li>
                    <li>-V, --version Информация о версии.</li>
                </ul>
                <p>Вы можете направить вывод mysqldump в клиентскую программу MySQL, чтобы копировать базу данных.
                    ПРИМЕЧАНИЕ: Вы должны убедиться, что база данных не изменяется в это время, иначе Вы получите
                    противоречивую копию!</p>
                <p>Для справки:</p>
                <pre class="prettyprint">mysqldump -u root -p mysql user>mysql-1.sql</pre>
                <pre class="prettyprint">mysqldump -u root mysql>mysql-2.sql</pre>

                <p>Примечание флаг –p используется в случае, если пользователь наделен паролем.<br>
                    После выполнения этой команды появился файл mysql-1.sql и mysql-2.sql. Загрузите их в текстовый
                    редактор, чтобы поподробнее изучить.</p>

                <h3 id="task">Задание</h3>
                <ul>
                    <li>Запустите сервер MySQL. Зарегистрируйте своего пользователя в консольном приложении, задайте ему
                        права.
                    </li>
                    <li>С помощью утилиты Mysqlshow выполните команду на просмотр структуры и состав таблиц базы
                        Mysql.
                    </li>
                    <li>Приведите в отчете её схему. С помощью утилиты Mysqldump получите полный дамп базы Mysql (данные
                        и
                        таблицы), а также отдельные дампы таблиц и данных.
                    </li>
                </ul>
                <h3 id="questions">Контрольные вопросы:</h3>

                <ol>
                    <li>Каким способом возможен запуск серверной части СУБД.</li>
                    <li>Что такое привилегия. Каково её предназначение.</li>
                    <li>Какие основные утилиты входят в состав СУБД, какие функции они выполняют.</li>
                </ol>

            </div>
        </div>
    </section>
</div>
<script src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/prettify/prettify.js"></script>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=css&skin=sunburst"></script>
<script src="js/layout.js"></script>
</body>
</html>

