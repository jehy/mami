<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Лабораторная #1 по базам данных</title>
    <link href="http://fonts.googleapis.com/css?family=Raleway:700,300" rel="stylesheet"
          type="text/css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/prettify.css">
</head>
<body>
<div class="wrapper">
    <header>
        <div class="container">
            <h2 class="lone-header">Лабораторная #1 по базам данных</h2>
        </div>
    </header>
    <section>
        <div class="container">
            <ul class="docs-nav">
                <li><a href="#install" class="cc-active">Установка MySQL</a></li>
                <li><a href="#launch" class="cc-active">Запуск MySQL</a></li>
                <li><a href="#privs" class="cc-active">Привилегии в MySQL</a></li>
                <li><a href="#create" class="cc-active">Создание пользователя в MySQL</a></li>
                <li><a href="#set_privs" class="cc-active">Назначение привилегий</a></li>
                <li class="separator"></li>
            </ul>
            <div class="docs-content">
                <h2>Лабораторная работа №1. Интерфейс СУБД MySQL. Предоставление доступа и привилегий. Утилиты, входящие
                    в состав СУБД</h2>

                <b>Цель работы:</b> Ознакомиться с приложениями, включенными в состав СУБД MySQL. Получить навыки
                управления учетными записями пользователей и определения привилегий. Ознакомиться с утилитами, входящими
                в состав СУБД MySQL, получить навыки работы с ними.


                <h3 id="install">Установка MySQL</h3>
                <p>
                    Есть несколько вариантов установки, в зависимости от того, будете ли вы использовать СУБД на своём
                    личном компьютере (что рекомендуется для полноценного освоения), или будете использовать компьютеры
                    института. </p>
                <h4>Установка на личном компьютере</h4>
                <p>Вы можете воспользоваться тем же вариантом, что и для установки на компьютер института, но проще
                    будет использовать специальный инсталлятор.
                    Для установки на личном компьютере вы просто скачиваете с сайта <a
                            href="http://dev.mysql.com/downloads/mysql/">http://dev.mysql.com/downloads/mysql/</a> MySQL
                    installer - это стандартный установщик, при помощи которого вы установите MySQL так же, как любую
                    другую прогрумму Windows. В процессе установке следует выбрать вариант "Developer Default", чтобы
                    установить полный необходимый вам набор инстурментов. Все остальные параметры можно оставить по
                    умолчанию. Пароль для администратора вы можете придумать сами.
                </p>
                <h4>Установка на компьютере инстутута</h4>
                <p>Скачать актуальный дистрибутив СУБД MySQL можно по адресу<br>

                    <a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a>
                    <br>
                    Нам понадобится вариант Windows (x86, 64-bit), ZIP Archive. Скорее всего, вы так же можете получить
                    его из сетевого диска, куда его предварительно скопировал преподаватель. В данном случае вы просто
                    распаковываете скачанный архив к себе на локальный (не сетевой!) диск.
                </p>
                <h3 id="launch">Запуск MySQL</h3>
                <h4>Запуск на личном компьютере</h4>
                <p>
                    В случае, если вы установили MySQL при помощи инсталлятора, то его запуск и остановка будут
                    осуществляться через управление службами Windows. По умолчанию после установки сервис должен уже
                    работать.
                    <img src="img/dbms-lab1/mysql-service.png">
                </p>
                <h4>Запуск на компьютере института</h4>
                <p>
                    Управление сервером будет осуществляться из командной строки. Для этого необходимо выполнить
                    следующие команды (перейдя в папку MySQL):
                </p>
                <ol>
                    <li>Сначала инициализируем базу:<br>

                        <pre class="prettyprint">bin\mysqld.exe --initialize --skip-log-syslog --standalone -console</pre>
                    </li>
                    <li>
                        Запомните пароль, который будет сгенерирован для пользователя root
                    </li>
                    <li>
                        Теперь запускаем базу:
                        <pre class="prettyprint">bin\mysqld.exe --skip-log-syslog --standalone --console</pre>
                    </li>
                    <li>И меняем пароль. Для этого запускаем клиентскую программу mysql

                        <pre class="prettyprint">Bin\mysql.exe –u root –p</pre>
                        и вводим текущий пароль.
                    </li>
                    <li>
                        И, оказавшись в консоли MySQL, меняем пароль:
                        <pre class="prettyprint lang-sql">SET PASSWORD FOR 'root'@'localhost' = PASSWORD('123');</pre>
                        Не забудьте переподключиться и проверить, что пароль поменялся!
                    </li>
                </ol>
                <h3 id="privs">Привилегии в MySQL</h3>
                <p>Для <b>работы с базами данных в MySQL</b> необходим пользователь, наделённый такими правами. То есть
                    при подключении к базе данных Вы должны указывать логин пользователя и его пароль, и если доступ ему
                    открыт, то он получит определённые права.</p>

                <p>В <b>MySQL</b> существуют три группы привилегий: <b>данные</b>, <b>структура</b>,
                    <b>администрирование</b>.
                    Первая группа связана с изменением записей в таблицах, вторая группа связана с изменением структуры
                    баз данных, а третья связана с администрированием, как бы это очевидно не звучало.</p>
                <p>Теперь перейдём к рассмотрению каждой группы отдельно. И начнём с прав на управление данными в
                    таблицах.</p>
                <ul>
                    <li><b>SELECT</b> - эта привилегия позволяет делать выборку (вытаскивание) записей из таблиц баз
                        данных.
                    </li>
                    <li><b>INSERT</b> - привилегия, которая необходима для добавления новых записей в таблицу.</li>
                    <li><b>UPDATE</b> - право, позволяющее обновлять записи в таблице.</li>
                    <li><b>DELETE</b> - эта привилегия позволяет удалять записи из таблицы.</li>
                    <li><b>FILE</b> - разрешает делать выборку записей и записывать данные в файл, а также считывать их
                        оттуда.
                    </li>
                </ul>
                <p>Теперь перейдём к <b>привилегиям пользователей MySQL</b>, позволяющие изменять структуру таблицы и
                    базы данных.</p>
                <ul>
                    <li><b>CREATE</b> - привилегия, позволяющая создавать новые базы данных, а также новые таблицы в
                        базе данных.
                    </li>
                    <li><b>ALTER</b> - привилегия, позволяющая переименовывать таблицы, вставлять новые поля в таблицу,
                        удалять поля из таблицы, а также модифицировать их.
                    </li>
                    <li><b>INDEX</b> - разрешает создавать индекс по определённому полю и удалять его. О том, что это
                        такое и для чего нужно мы поговорим в одной из следующих статей.
                    </li>
                    <li><b>DROP</b> - право, которое позволяет удалять либо таблицы, либо целые базы данных.</li>
                    <li><b>CREATE TEMPORARY TABLES</b> - возможность создавать временные таблицы, которые хранятся во
                        время сессии, а после окончания сессии данная таблица автоматически удаляется.
                    </li>
                </ul>
                <p>И последняя группа привилегий - это привилегии, связанные с администрированием баз данных.</p>
                <ul>
                    <li><b>GRANT</b> - привилегия, которая позволяет создавать новых пользователей, а также менять права
                        у существующих. Тут есть очень важная деталь: нельзя изменять значения привилегий, которыми сам
                        не обладаешь. То есть если человек обладает <b>привилегией GRANT</b>, но не обладает <b>привилегией
                            SELECT</b>, то он не может новым пользователям дать <b>привилегию SELECT</b>. Впрочем, это
                        вполне логично.
                    </li>
                    <li><b>SUPER</b> - позволяет использовать команду "<b>kill</b>", то есть убить поток. Поток - это
                        текущее подключение другого пользователя к базе данных.
                    </li>
                    <li><b>PROCESS</b> - привилегия, позволяющая выполнить команду "<b>processlist</b>", которая
                        показывает список потоков.
                    </li>
                    <li><b>RELOAD</b> - позволяет открывать и закрывать файлы журналов, а также перечитывать таблицы
                        привилегий пользователей.
                    </li>
                    <li><b>SHUTDOWN</b> - привилегия, позволяющая выполнить команду "<b>shutdown</b>", отключающая
                        работу сервера.
                    </li>
                    <li><b>SHOW DATABASES</b> - разрешает просматривать все существующие базы данных.</li>
                    <li><b>REFERENCES</b> - данная привилегия ещё не доступна, а только зарезервирована для
                        использования в будущем.
                    </li>
                    <li><b>LOCK TABLES</b> - позволяет блокировать таблицы от указанных потоков.</li>
                    <li><b>EXECUTE</b> - позволяет запускать хранимые процедуры.</li>
                    <li><b>REPLICATION CLIENT</b> - даёт право получать местонахождение ведущего (<b>master</b>) и
                        ведомых (<b>slaves</b>) серверов.
                    </li>
                    <li><b>REPLICATION SLAVE</b> - это привилегия, позволяющая читать ведомым журнала ведущего сервера.
                    </li>
                </ul>
                <p>И, наконец, специальные привилегии, связанные с ограничением на доступные ресурсы:</p>
                <ul>
                    <li><b>MAX QUERIES PER HOUR</b> - максимальное количество запросов в час, которое может отправить
                        пользователь.
                    </li>
                    <li><b>MAX UPDATES PER HOUR</b> - максимальное количество команд в час, которые каким-либо образом
                        изменяют либо таблицу, либо базу данных.
                    </li>
                    <li><b>MAX CONNECTIONS PER HOUR</b> - максимальное количество подключений в час, которое может
                        сделать пользователь.
                    </li>
                </ul>
                <p>Если значение вышеназванных пределов равны "<b>0</b>", то ресурсы для пользователя не ограничены.</p>

                <h3 id="create">Создание нового пользователя в MySQL</h3>
                <p>Ранее мы вносили все изменения в настройки MySQL под root-пользователем, имея полный доступ ко всем
                    базам данных. Однако для случаев, когда могут потребоваться более жесткие ограничения, есть способы
                    создания пользователей с особыми наборами прав доступа.
                </p>
                <p>
                    Давайте начнем с создания нового пользователя из консоли MySQL:
                </p>
                <pre class="prettyprint lang-sql">CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';</pre>

                <p>К сожалению, на данном этапе пользователь "newuser" не имеет прав делать что-либо с базами данных. На
                    самом деле, даже если если пользователь "newuser" попробует залогиниться (с паролем "password"), он
                    не попадет в консоль MySQL.
                </p>
                <p>
                    Таким образом, первое, что нам необходимо сделать, это предоставить пользователю доступ к
                    информации, которая ему потребуется.</p>

                <pre class="prettyprint lang-sql">GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost';</pre>
                <p>Звездочки в этой команде задают базу и таблицу, соответственно, к которым у пользователя будет
                    доступ.
                    Конкретно эта команда позволяет пользователю читать, редактировать, выполнять любые действия над
                    всеми
                    базами данных и таблицами.
                </p>
                <p>
                    Поле завершения настройки прав доступа новых пользователей, убедитесь, что вы обновили все права
                    доступа:</p>

                <pre class="prettyprint lang-sql">FLUSH PRIVILEGES;</pre>
                <p>Теперь ваши изменения вступят в силу.</p>

                <h3 id="set_privs">Назначение привилегий</h3>
                <p>Для назначения прав конкретному пользователю можно использовать следующую схему:</p>

                <pre class="prettyprint lang-sql">GRANT [тип прав] ON [название базы данных].[название таблицы] TO ‘[имя пользователя]’@'localhost’;</pre>
                <p>Если вы хотите дать доступ к любой базе данных или к любой таблице, поставьте звездочку (*) вместо
                    названия базы данных или таблицы.</p>

                <p>Каждый раз, когда вы изменяете права доступа, не забудьте использовать команду Flush Privileges.</p>

                <p>Лишения прав доступа практически идентично их назначению:</p>

                <pre class="prettyprint lang-sql">REVOKE [тип прав] ON [название базы данных].[название таблицы] FROM ‘[имя пользователя]’@‘localhost’;</pre>
                <p>По аналогии с использованием команды DROP для удаления базы данных, вы можете использовать эту
                    команду и
                    для
                    удаления пользователя.</p>

                <pre class="prettyprint lang-sql">DROP USER ‘demo’@‘localhost’;</pre>
                <p>Для тестирования учетной записи созданного пользователя, разлогиньтесь с помощью команды:</p>

                <pre class="prettyprint">quit</pre>
                <p>и залогиньтесь снова, введя в терминате следующую команду:</p>

                <pre class="prettyprint">mysql -u [имя пользователя]-p</pre>

            </div>
        </div>
    </section>
</div>
<script src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/prettify/prettify.js"></script>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=css&skin=sunburst"></script>
<script src="js/layout.js"></script>
</body>
</html>

